<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Cuestionario de Autonom√≠a</title>
  <link rel="stylesheet" href="estilo.css">
</head>
<body>
  <h1>Cuestionario de Autonom√≠a</h1>

  <div class="instrucciones">
    <p><strong>INSTRUCCIONES:</strong> Lee cada afirmaci√≥n y escribe tu respuesta libremente.</p>
  </div>

  <form id="cuestionario">
  <h2>Datos Generales</h2>

  <div class="datos-generales">
    <div class="campo">
      <label>Edad (a√±os):</label>
      <input type="number" name="edad" required min="1">
    </div>

    <div class="campo">
      <label>Sexo (sexo):</label>
      <div class="codigo-opciones">
        <p>1 = Masculino</p>
        <p>2 = Femenino</p>
        <p>3 = Otro / Prefiero no decir</p>
      </div>
      <input type="text" name="sexo">
    </div>

    <div class="campo">
      <label>Escolaridad (escolaridad):</label>
      <div class="codigo-opciones">
        <p>1 = Primaria</p>
        <p>2 = Secundaria</p>
        <p>3 = Bachillerato/Preparatoria</p>
        <p>4 = Licenciatura/T√©cnico</p>
        <p>5 = Posgrado</p>
        <p>9 = Otro/No especificado</p>
      </div>
      <input type="text" name="escolaridad" required>
    </div>

    <div class="campo">
      <label>Ocupaci√≥n (ocupacion):</label>
      <div class="codigo-opciones">
        <p>1 = Estudiante</p>
        <p>2 = Trabajador(a)</p>
        <p>3 = Desempleado(a)</p>
        <p>4 = Hogar/Cuidador(a)</p>
        <p>5 = Jubilado(a)</p>
        <p>9 = Otro/No especificado</p>
      </div>
      <input type="text" name="ocupacion" required>
    </div>

    <div class="campo">
      <label>Estatura (cm):</label>
      <input type="number" name="estatura" required min="30" max="250">
    </div>

    <div class="campo">
      <label>Peso (kg):</label>
      <input type="number" name="peso" required min="10" max="300">
    </div>

    <div class="campo">
      <label>Horas de sue√±o promedio:</label>
      <input type="number" name="sueno" required min="0" max="24">
    </div>

    <div class="campo">
      <label>D√≠as/semana con actividad f√≠sica (‚â•30 min):</label>
      <input type="number" name="actividad" required min="0" max="7">
    </div>
  </div>

  <h2>√çtems</h2>
  <div id="items"></div>

  <button type="submit">Enviar</button>
</form>

   <script>
  const items = [
    "Cumplo mis compromisos a tiempo sin que me recuerden",
    "Tomo decisiones por m√≠ mismo(a) y asumo sus consecuencias",
    "Necesito que alguien me diga exactamente qu√© hacer. (invertida)",
    "Cuando me enojo o me frustro, recupero la calma con facilidad",
    "Mis emociones cambian muy r√°pido y me cuesta controlarlas. (invertida)",
    "Hago planes para metas a mediano o largo plazo (semanas/meses)",
    "Me cuesta pensar en las consecuencias futuras de mis actos. (invertida)",
    "Lo que opina mi grupo de amigos influye mucho en mis decisiones",
    "Me gusta experimentar cosas nuevas aunque impliquen cierto riesgo",
    "Obedezco reglas solo si alguien me vigila. (invertida)",
    "Sigo normas porque entiendo su utilidad",
    "Prefiero actividades de juego/diversi√≥n aunque tenga pendientes",
    "Puedo dejar el ocio para cumplir una responsabilidad. (invertida)",
    "Act√∫o sin pensar cuando algo me emociona. (invertida)",
    "Eval√∫o pros y contras antes de tomar decisiones importantes",
    "Mantengo h√°bitos de autocuidado (sue√±o, aseo, alimentaci√≥n)",
    "Necesito que me organicen rutinas b√°sicas (tareas, horarios). (invertida)",
    "Considero c√≥mo afectan mis acciones a otras personas"
  ];

  const itemsDiv = document.getElementById("items");

  // Crear inputs din√°micos
  items.forEach((texto, i) => {
    const div = document.createElement("div");
    div.classList.add("item");

    const label = document.createElement("label");
    label.textContent = (i + 1) + ") " + texto;

    // Opciones en una sola l√≠nea
    const opciones = document.createElement("div");
    opciones.classList.add("opciones");
    opciones.innerHTML = "‚Ä¢ Nunca &nbsp;&nbsp; ‚Ä¢ Rara vez &nbsp;&nbsp; ‚Ä¢ A veces &nbsp;&nbsp; ‚Ä¢ Frecuente &nbsp;&nbsp; ‚Ä¢ Casi siempre";

    const input = document.createElement("input");
    input.type = "text";
    input.name = "item" + (i + 1);
    input.required = true;

    div.appendChild(label);
    div.appendChild(opciones);
    div.appendChild(input);
    itemsDiv.appendChild(div);
  });

  // Manejar submit
  document.getElementById("cuestionario").addEventListener("submit", function(e) {
    e.preventDefault();

    const data = {
      edad: document.querySelector('input[name="edad"]').value,
      sexo: document.querySelector('input[name="sexo"]').value,
      escolaridad: document.querySelector('input[name="escolaridad"]').value,
      ocupacion: document.querySelector('input[name="ocupacion"]').value,
      estatura: document.querySelector('input[name="estatura"]').value,
      peso: document.querySelector('input[name="peso"]').value,
      sueno: document.querySelector('input[name="sueno"]').value,
      actividad: document.querySelector('input[name="actividad"]').value,
    };

    // Agregar respuestas de √≠tems
    const inputs = document.querySelectorAll("#items input");
    inputs.forEach((input, i) => {
      data["item" + (i + 1)] = input.value.trim();
    });

    fetch('/guardar', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(data)
})
.then(res => res.json())
.then(data => {
  if(data.success) {
    window.location.href = "gracias.html"; // üëâ Redirige a la p√°gina de agradecimiento
  } else {
    alert("‚ùå Error al guardar los datos");
  }
})
.catch(err => {
  console.error(err);
  alert("‚ùå Error al enviar la solicitud");
});
  });
</script>
</body>
</html>
